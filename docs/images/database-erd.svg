<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="700" y="35" font-size="28" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    SaaS Platform - Database Entity Relationship Diagram (ERD)
  </text>
  
  <!-- Legend -->
  <text x="50" y="55" font-size="11" font-weight="bold" fill="#333">PK = Primary Key | FK = Foreign Key | U = Unique</text>
  
  <!-- TENANTS Table -->
  <rect x="50" y="100" width="220" height="200" fill="#e8f4f8" stroke="#0891b2" stroke-width="2" rx="3"/>
  <text x="160" y="125" font-size="13" font-weight="bold" text-anchor="middle" fill="#0c4a6e">TENANTS</text>
  <line x1="50" y1="135" x2="270" y2="135" stroke="#0891b2" stroke-width="1"/>
  
  <text x="60" y="155" font-size="10" fill="#0c4a6e"><tspan font-weight="bold">id</tspan> (PK, UUID)</text>
  <text x="60" y="170" font-size="10" fill="#0c4a6e">name (VARCHAR, U)</text>
  <text x="60" y="185" font-size="10" fill="#0c4a6e">subdomain (VARCHAR, U)</text>
  <text x="60" y="200" font-size="10" fill="#0c4a6e">status (ENUM)</text>
  <text x="60" y="215" font-size="10" fill="#0c4a6e">subscription_plan (VARCHAR)</text>
  <text x="60" y="230" font-size="10" fill="#0c4a6e">max_users (INTEGER)</text>
  <text x="60" y="245" font-size="10" fill="#0c4a6e">max_projects (INTEGER)</text>
  <text x="60" y="260" font-size="10" fill="#0c4a6e">created_at (TIMESTAMP)</text>
  <text x="60" y="275" font-size="10" fill="#0c4a6e">updated_at (TIMESTAMP)</text>
  
  <!-- USERS Table -->
  <rect x="350" y="100" width="250" height="240" fill="#f0fce7" stroke="#22c55e" stroke-width="2" rx="3"/>
  <text x="475" y="125" font-size="13" font-weight="bold" text-anchor="middle" fill="#15803d">USERS</text>
  <line x1="350" y1="135" x2="600" y2="135" stroke="#22c55e" stroke-width="1"/>
  
  <text x="360" y="155" font-size="10" fill="#15803d"><tspan font-weight="bold">id</tspan> (PK, UUID)</text>
  <text x="360" y="170" font-size="10" fill="#15803d"><tspan font-weight="bold">tenant_id</tspan> (FK → tenants)</text>
  <text x="360" y="185" font-size="10" fill="#15803d">email (VARCHAR, U)</text>
  <text x="360" y="200" font-size="10" fill="#15803d">password_hash (VARCHAR)</text>
  <text x="360" y="215" font-size="10" fill="#15803d">full_name (VARCHAR)</text>
  <text x="360" y="230" font-size="10" fill="#15803d">role (ENUM)</text>
  <text x="360" y="245" font-size="10" fill="#15803d">is_active (BOOLEAN)</text>
  <text x="360" y="260" font-size="10" fill="#15803d">created_at (TIMESTAMP)</text>
  <text x="360" y="275" font-size="10" fill="#15803d">updated_at (TIMESTAMP)</text>
  <text x="360" y="290" font-size="10" fill="#15803d" font-style="italic">Roles: super_admin, tenant_admin, user</text>
  
  <!-- PROJECTS Table -->
  <rect x="700" y="100" width="240" height="200" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="3"/>
  <text x="820" y="125" font-size="13" font-weight="bold" text-anchor="middle" fill="#92400e">PROJECTS</text>
  <line x1="700" y1="135" x2="940" y2="135" stroke="#f59e0b" stroke-width="1"/>
  
  <text x="710" y="155" font-size="10" fill="#92400e"><tspan font-weight="bold">id</tspan> (PK, UUID)</text>
  <text x="710" y="170" font-size="10" fill="#92400e"><tspan font-weight="bold">tenant_id</tspan> (FK → tenants)</text>
  <text x="710" y="185" font-size="10" fill="#92400e">name (VARCHAR)</text>
  <text x="710" y="200" font-size="10" fill="#92400e">description (TEXT)</text>
  <text x="710" y="215" font-size="10" fill="#92400e">status (ENUM)</text>
  <text x="710" y="230" font-size="10" fill="#92400e">created_by (UUID, FK)</text>
  <text x="710" y="245" font-size="10" fill="#92400e">created_at (TIMESTAMP)</text>
  <text x="710" y="260" font-size="10" fill="#92400e">updated_at (TIMESTAMP)</text>
  
  <!-- TASKS Table -->
  <rect x="1000" y="100" width="180" height="240" fill="#f3e8ff" stroke="#a855f7" stroke-width="2" rx="3"/>
  <text x="1090" y="125" font-size="13" font-weight="bold" text-anchor="middle" fill="#6b21a8">TASKS</text>
  <line x1="1000" y1="135" x2="1180" y2="135" stroke="#a855f7" stroke-width="1"/>
  
  <text x="1010" y="155" font-size="10" fill="#6b21a8"><tspan font-weight="bold">id</tspan> (PK, UUID)</text>
  <text x="1010" y="170" font-size="10" fill="#6b21a8"><tspan font-weight="bold">project_id</tspan> (FK)</text>
  <text x="1010" y="185" font-size="10" fill="#6b21a8"><tspan font-weight="bold">tenant_id</tspan> (FK)</text>
  <text x="1010" y="200" font-size="10" fill="#6b21a8">title (VARCHAR)</text>
  <text x="1010" y="215" font-size="10" fill="#6b21a8">description (TEXT)</text>
  <text x="1010" y="230" font-size="10" fill="#6b21a8">status (ENUM)</text>
  <text x="1010" y="245" font-size="10" fill="#6b21a8">priority (ENUM)</text>
  <text x="1010" y="260" font-size="10" fill="#6b21a8">assigned_to (UUID)</text>
  <text x="1010" y="275" font-size="10" fill="#6b21a8">due_date (DATE)</text>
  <text x="1010" y="290" font-size="10" fill="#6b21a8">created_at (TIMESTAMP)</text>
  
  <!-- AUDIT_LOGS Table -->
  <rect x="350" y="420" width="280" height="200" fill="#fce7f3" stroke="#ec4899" stroke-width="2" rx="3"/>
  <text x="490" y="445" font-size="13" font-weight="bold" text-anchor="middle" fill="#831843">AUDIT_LOGS</text>
  <line x1="350" y1="455" x2="630" y2="455" stroke="#ec4899" stroke-width="1"/>
  
  <text x="360" y="475" font-size="10" fill="#831843"><tspan font-weight="bold">id</tspan> (PK, BIGSERIAL)</text>
  <text x="360" y="490" font-size="10" fill="#831843"><tspan font-weight="bold">tenant_id</tspan> (FK → tenants)</text>
  <text x="360" y="505" font-size="10" fill="#831843">user_id (UUID, FK → users)</text>
  <text x="360" y="520" font-size="10" fill="#831843">entity_type (VARCHAR)</text>
  <text x="360" y="535" font-size="10" fill="#831843">action (VARCHAR)</text>
  <text x="360" y="550" font-size="10" fill="#831843">details (JSONB)</text>
  <text x="360" y="565" font-size="10" fill="#831843">ip_address (VARCHAR)</text>
  <text x="360" y="580" font-size="10" fill="#831843">created_at (TIMESTAMP)</text>
  
  <!-- Relationships -->
  <!-- Tenants to Users (1:N) -->
  <path d="M 270 180 L 350 180" stroke="#666" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="290" y="170" font-size="9" fill="#666">1:N</text>
  
  <!-- Tenants to Projects (1:N) -->
  <path d="M 270 150 Q 485 100 700 150" stroke="#666" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="430" y="95" font-size="9" fill="#666">1:N</text>
  
  <!-- Tenants to Audit_logs (1:N) -->
  <path d="M 160 300 Q 160 360 400 420" stroke="#666" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="170" y="360" font-size="9" fill="#666">1:N</text>
  
  <!-- Projects to Tasks (1:N) -->
  <path d="M 940 150 L 1000 150" stroke="#666" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="960" y="140" font-size="9" fill="#666">1:N</text>
  
  <!-- Users to Projects (created_by) -->
  <path d="M 600 200 Q 650 150 700 150" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <text x="650" y="140" font-size="8" fill="#999">created_by</text>
  
  <!-- Users to Tasks (assigned_to) -->
  <path d="M 600 250 Q 800 200 1000 200" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <text x="750" y="190" font-size="8" fill="#999">assigned_to</text>
  
  <!-- Users to Audit_logs (user_id) -->
  <path d="M 475 340 L 475 420" stroke="#999" stroke-width="1" stroke-dasharray="5,5"/>
  <text x="420" y="380" font-size="8" fill="#999">user_id</text>
  
  <!-- Key Relationships Box -->
  <rect x="50" y="420" width="280" height="200" fill="#f0fce7" stroke="#22c55e" stroke-width="2" rx="3"/>
  <text x="190" y="445" font-size="12" font-weight="bold" text-anchor="middle" fill="#15803d">Key Relationships</text>
  <line x1="50" y1="455" x2="330" y2="455" stroke="#22c55e" stroke-width="1"/>
  
  <text x="60" y="475" font-size="10" fill="#15803d"><tspan font-weight="bold">Multi-Tenancy:</tspan></text>
  <text x="60" y="490" font-size="10" fill="#15803d">• All tables filtered by tenant_id</text>
  <text x="60" y="505" font-size="10" fill="#15803d">• Data isolated per tenant</text>
  <text x="60" y="520" font-size="10" fill="#15803d"><tspan font-weight="bold">User Roles:</tspan></text>
  <text x="60" y="535" font-size="10" fill="#15803d">• super_admin: System wide</text>
  <text x="60" y="550" font-size="10" fill="#15803d">• tenant_admin: Tenant only</text>
  <text x="60" y="565" font-size="10" fill="#15803d">• user: Limited access</text>
  <text x="60" y="580" font-size="10" fill="#15803d"><tspan font-weight="bold">Audit Trail:</tspan> All changes logged</text>
  
  <!-- Constraints Box -->
  <rect x="700" y="420" width="480" height="200" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="3"/>
  <text x="940" y="445" font-size="12" font-weight="bold" text-anchor="middle" fill="#92400e">Constraints & Validation</text>
  <line x1="700" y1="455" x2="1180" y2="455" stroke="#f59e0b" stroke-width="1"/>
  
  <text x="710" y="475" font-size="10" fill="#92400e"><tspan font-weight="bold">Unique Constraints:</tspan></text>
  <text x="710" y="490" font-size="10" fill="#92400e">• tenants(name), tenants(subdomain)</text>
  <text x="710" y="505" font-size="10" fill="#92400e">• users(email) within tenant</text>
  
  <text x="710" y="525" font-size="10" fill="#92400e"><tspan font-weight="bold">Indexes:</tspan></text>
  <text x="710" y="540" font-size="10" fill="#92400e">• tenant_id on all tables (performance)</text>
  <text x="710" y="555" font-size="10" fill="#92400e">• email on users table</text>
  <text x="710" y="570" font-size="10" fill="#92400e">• project_id on tasks</text>
  
  <text x="710" y="590" font-size="10" fill="#92400e"><tspan font-weight="bold">Enums:</tspan></text>
  <text x="710" y="605" font-size="10" fill="#92400e">• Status: active|inactive|archived|completed</text>
  <text x="710" y="620" font-size="10" fill="#92400e">• Priority: high|medium|low</text>
</svg>
